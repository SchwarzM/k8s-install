---
ignition_version: 1
systemd:
  units:
    - name: etcd2.service
      enable: true
      dropins:
        - name: 10-mount.conf
          contents: |
            [Unit]
            After=mnt-etcd.mount
            Requires=mnt-etcd.mount
        - name: 20-discover.conf
          contents: |
            [Service]
            Environment=ETCD_DISCOVERY=https://discovery.etcd.io/43852665ae534f7ed12e04ee66ce0b60
        - name: 30-data.conf
          contents: |
            [Service]
            Environment=ETCD_DATA_DIR=/mnt/etcd
    - name: rpc-statd.service
      enable: true
    - name: mnt-etcd.mount
      enable: true
      contents: |
        [Mount]
        What=10.0.1.2:/mnt/vol0/baal/etcd
        Where=/mnt/etcd
        Type=nfs
